# Quick Deployment Steps

## üöÄ Fast Track to Production

### Step 1: Push Backend to GitHub (5 min)

```powershell
# Run the helper script
.\fix-backend-push.ps1
```

**OR manually**:
1. Get token: https://github.com/settings/tokens ‚Üí Generate new token (classic) ‚Üí Select `repo` scope
2. Update remote:
   ```powershell
   cd backend
   git remote set-url origin https://YOUR_TOKEN@github.com/websupport-ttp/ttp-saas-backend.git
   git push origin main
   ```

### Step 2: Connect Railway to GitHub (2 min)

1. Go to https://railway.app/
2. Profile ‚Üí Settings ‚Üí Connected Accounts
3. Disconnect and reconnect GitHub
4. **Important**: Grant access to `websupport-ttp` organization when prompted

### Step 3: Deploy Backend on Railway (10 min)

1. **New Project** ‚Üí Deploy from GitHub ‚Üí `websupport-ttp/ttp-saas-backend`
2. **Add MongoDB**: New ‚Üí Database ‚Üí MongoDB
3. **Add Redis**: New ‚Üí Database ‚Üí Redis
4. **Add Variables** (copy from your `.env`):
   - `NODE_ENV=production`
   - `JWT_SECRET=...`
   - `CLOUDINARY_CLOUD_NAME=...`
   - `CLOUDINARY_API_KEY=...`
   - `CLOUDINARY_API_SECRET=...`
   - `PAYSTACK_SECRET_KEY=...`
   - `PAYSTACK_PUBLIC_KEY=...`
   - `ALLOWED_ORIGINS=` (add Vercel URL later)
5. **Deploy** ‚Üí Copy Railway URL

### Step 4: Deploy Frontend on Vercel (5 min)

1. Go to https://vercel.com/
2. **New Project** ‚Üí Import `websupport-ttp/ttp-saas-frontend`
3. **Add Variable**:
   - `NEXT_PUBLIC_API_BASE_URL=https://your-backend.up.railway.app`
4. **Deploy** ‚Üí Copy Vercel URL

### Step 5: Update CORS (1 min)

1. Go back to Railway
2. Add to `ALLOWED_ORIGINS`: `https://your-app.vercel.app`
3. Redeploy

### Step 6: Test (5 min)

Visit your Vercel URL and test:
- ‚úÖ Login
- ‚úÖ Dashboard
- ‚úÖ Profile upload
- ‚úÖ Visa form
- ‚úÖ Car booking

---

## üìã Environment Variables Checklist

### Railway (Backend)
```env
NODE_ENV=production
PORT=8080
MONGODB_URI=<auto-generated>
REDIS_URL=<auto-generated>
JWT_SECRET=your_secret
JWT_EXPIRE=30d
COOKIE_SECRET=your_cookie_secret
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret
PAYSTACK_SECRET_KEY=sk_test_...
PAYSTACK_PUBLIC_KEY=pk_test_...
ALLOWED_ORIGINS=https://your-app.vercel.app
```

### Vercel (Frontend)
```env
NEXT_PUBLIC_API_BASE_URL=https://your-backend.up.railway.app
```

---

## üîç Quick Verification

### Backend Health Check
```
https://your-backend.up.railway.app/health
```
Should return: `{ "status": "ok" }`

### Frontend
```
https://your-app.vercel.app
```
Should load the homepage

---

## ‚ö†Ô∏è Common Issues

### Railway: "No repository found"
**Fix**: Reconnect GitHub and grant organization access

### Backend: Push fails
**Fix**: Use Personal Access Token in remote URL

### Frontend: API calls fail
**Fix**: Check CORS settings in Railway

### Backend: MongoDB connection fails
**Fix**: Whitelist all IPs (0.0.0.0/0) in MongoDB Atlas

---

## üìö Full Documentation

- **Complete Guide**: `RAILWAY_VERCEL_DEPLOYMENT_GUIDE.md`
- **Current Status**: `DEPLOYMENT_STATUS.md`
- **Helper Script**: `fix-backend-push.ps1`

---

**Total Time**: ~30 minutes from start to deployed application
